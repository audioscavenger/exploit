pathmunge() {
if [ -d "$1" ]; then
  local path
  path=$(realpath "$1")
  [ -z "$PATH" ] && export PATH="$path" && return
  case "X$2" in
  "Xafter") [[ ":$PATH:" != *":$path:"* ]] && PATH="${PATH:+"$PATH:"}$path";;
  "X-f")    PATH=:$PATH && PATH=$path${PATH//:$path/} ;;
  *)        [[ ":$PATH:" != *":$path:"* ]] && PATH="$path${PATH:+":$PATH"}" ;;
  esac
fi
}
