detect_os_from_release_file() {
OS=''
if [[ -f /etc/fedora-release ]]; then
  OS='Fedora'
elif [[ -f /etc/redhat-release ]]; then
  for os_name in Fedora CentOS RedHat; do
    grep -i $os_name /etc/redhat-release > /dev/null 2> /dev/null
    if [[ $? == 0 ]]; then
      OS=$os_name
      break
    fi
  done
elif [[ -f /etc/lsb-release ]]; then
  grep -i Ubuntu /etc/lsb-release > /dev/null 2> /dev/null
  if [[ $? == 0 ]]; then
    OS='Ubuntu'
  fi
elif [[ -f /etc/debian_version ]] || [[ -f /etc/debian_release ]]; then
  OS='Debian'
elif [[ -f /etc/slackware-release ]] || [[ -f /etc/slackware-version ]]; then
  OS='Slackware'
elif [[ -f /etc/mandrake-release ]]; then
  OS='Mandrake'
elif [[ -f /etc/SUSE-release ]]; then
  OS='Suse'
elif [[ -f /etc/gentoo-release ]]; then
  OS='Gentoo'
fi
if [[ $OS == '' ]]; then
  return 1
fi
}